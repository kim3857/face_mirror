# 消息队列面试指南

## 目录
- [消息可靠性保障](#消息可靠性保障)
- [消息积压处理](#消息积压处理)
- [消息顺序性保证](#消息顺序性保证)

## 消息可靠性保障

### 1. 消息发送
- 发送确认
  - 同步确认
  - 异步确认
  - 批量确认
- 消息重试
  - 重试策略
  - 重试次数
  - 重试间隔
- 消息持久化
  - 磁盘持久化
  - 内存持久化
  - 混合持久化

### 2. 消息存储
- 存储机制
  - 文件存储
  - 数据库存储
  - 混合存储
- 存储优化
  - 文件分段
  - 索引优化
  - 压缩存储
- 数据备份
  - 主从复制
  - 数据同步
  - 故障恢复

### 3. 消息消费
- 消费确认
  - 自动确认
  - 手动确认
  - 批量确认
- 消费重试
  - 重试策略
  - 死信队列
  - 消息重投
- 消费幂等
  - 唯一标识
  - 状态检查
  - 事务处理

## 消息积压处理

### 1. 监控告警
- 积压监控
  - 队列长度
  - 消费延迟
  - 处理速度
- 告警策略
  - 阈值设置
  - 告警方式
  - 告警处理

### 2. 扩容方案
- 消费者扩容
  - 水平扩展
  - 垂直扩展
  - 混合扩展
- 队列扩容
  - 分区扩容
  - 集群扩容
  - 混合扩容

### 3. 应急处理
- 限流降级
  - 限流策略
  - 降级策略
  - 熔断策略
- 数据清理
  - 过期清理
  - 批量清理
  - 选择性清理

## 消息顺序性保证

### 1. 全局顺序
- 单分区
  - 实现原理
  - 性能影响
  - 适用场景
- 多分区
  - 实现原理
  - 性能影响
  - 适用场景

### 2. 局部顺序
- 分区策略
  - 哈希分区
  - 范围分区
  - 轮询分区
- 消费策略
  - 单线程消费
  - 多线程消费
  - 混合消费

### 3. 顺序保证
- 发送顺序
  - 同步发送
  - 异步发送
  - 批量发送
- 消费顺序
  - 顺序消费
  - 并发消费
  - 混合消费

## 面试常见问题

### 1. 可靠性相关
- 如何保证消息不丢失？
- 如何处理消息重复消费？
- 如何保证消息的可靠性？

### 2. 性能相关
- 如何处理消息积压？
- 如何提高消息处理速度？
- 如何优化消息队列性能？

### 3. 顺序性相关
- 如何保证消息顺序？
- 如何处理消息乱序？
- 如何实现消息的有序消费？

## 面试技巧

### 1. 答题策略
- 从原理角度分析
- 结合实际案例
- 展示优化思路

### 2. 注意事项
- 注意回答的深度
- 保持逻辑清晰
- 适当举例说明

## 参考资料
- 《RabbitMQ实战》
- 《Kafka权威指南》
- 《消息队列原理与实战》 